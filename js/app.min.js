"use strict";var UTIL=function(){let e={capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},round:function(e){return Math.round(100*(e+Number.EPSILON))/100},guid:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))},formatDate:function(e){let t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1,c=t.getDate();return c<10&&(c="0"+c),i<10&&(i="0"+i),`${n}-${i}-${c}`}};return e}(),LANG=function(){let e={data:null,_current:null,keys:["es","bu","de","en","fr","gr","hu","it","nl","pt","ro","ru","tr"]};const t="eurospandLang";return e.init=function(n){let i={lang:null};n=Object.assign({},i,n);let c=document.querySelector("[data-lang]");if(c&&c.remove(),!n.lang){let e=localStorage.getItem(t);e&&(n.lang=e)}n.lang||(n.lang=LANG.detect()),n.lang||(n.lang="en");let r="lang/"+n.lang+".js",a=document.createElement("script");a.setAttribute("data-lang",n.lang),a.onload=function(){e.data=LANG_DATA,UNIT.init(),APP.init()},a.src=r,document.head.appendChild(a),e._current=n.lang,localStorage.setItem(t,e.current())},e.current=function(){return e._current},e.get=function(t){return e.data[t]},e.list=function(){return[{id:"it",name:"italiano"},{id:"en",name:"english"},{id:"fr",name:"Français"},{id:"de",name:"Deutsch"},{id:"nl",name:"Nederlands"},{id:"es",name:" español"},{id:"ru",name:"Pусский"},{id:"gr",name:"ελληνικά"},{id:"pt",name:"Português"},{id:"ro",name:"Română"},{id:"tr",name:"Türk"},{id:"bu",name:"български"},{id:"hu",name:"Magyar"}]},e.change=function(e){return!1},e.detect=function(){let e=null;try{e=navigator.language.substring(0,2)}catch(t){e=null}return e},e.replace=function(e){console.log(typeof e);let t="";if("string"!=typeof e){let n=document.createElement("div");n.append(e),t=n.innerHTML,console.log(t)}return t=String(t).replace(/\{(.*?)\}/g,function(e,t){return LANG.get(t)}),t},e}(),UNIT=function(){let e={data:null,_current:null,WIDTH:"width",SPEED:"speed",QUANTITY:"quantity",MASS_FLOW:"massFlow"};const t="eurospandUnit";e.init=function(n){let i={unit:null};if(n=Object.assign({},i,n),!n.unit){let e=localStorage.getItem(t);e&&(n.unit=e)}n.unit||(n.unit="m"),e._current=e.get(n.unit),localStorage.setItem(t,e.current().id)},e.current=function(){return e._current},e.get=function(t){for(const n of e.list())if(n.id==t)return n;return null},e.list=function(){return[{id:"m",width:"m",speed:"Km/h",quantity:"Kg/ha",massFlow:"Kg/min",specificWeight:"Kg/dm3",weight:"Kg"},{id:"b",width:"ft",speed:"mph",quantity:"lb/ac",massFlow:"lb/min",specificWeight:"lb/gal",weight:"lb"},{id:"a",width:"ft",speed:"mph",quantity:"lb/ac",massFlow:"lb/min",specificWeight:"lb/gal",weight:"lb"}]},e.change=function(t){e.init({unit:t})};const n={width:{b:3.281,a:3.281},speed:{b:.621,a:.621},quantity:{b:.892,a:.892},massFlow:{b:2.205,a:2.205},specificWeight:{b:10.022,a:8.345},weight:{b:2.205,a:2.205},capacity:{b:.22,a:.264},quantityCapacity:{b:10.036,a:8.364}};return e.fullConvert=function(e,t,i="m",c="a",r=!1){let a=Number(e);return e=Number(e),i==c?e:(a="m"!=i?e/n[t][i]:e*n[t][c],a=a.toFixed(2),r&&(a+=" "+UNIT.current()[t]),a)},e.convert=function(t,n,i=!1){return e.fullConvert(t,n,"m",e.current().id,i)},e.unconvert=function(t,n){return e.fullConvert(t,n,e.current().id,"m")},e}(),API=function(){let e={};return e=function(e,t){function n(e){return new Promise(t=>e.json().then(n=>t({status:e.status,ok:e.ok,json:n})))}let i,c=!1;if(t instanceof FormData)i=t;else{c=!0;let e={};t=Object.assign({},e,t),i=JSON.stringify(t)}let r={method:"post",body:i};return c&&(r.headers={"content-type":"application/json"}),new Promise((t,i)=>{fetch(e,r).then(e=>(e.redirected&&(location.href=e.url),e)).then(n).then(e=>e.ok?t(e.json.content):i(e.json)).catch(e=>i({networkError:e.message}))})},e}(),APP=function(){let e={debug:!1,currentMachine:null,currentConcime:null,concimeTypeList:["fertilizzanti","semi","lumachicida"]};const t="eurospandSavedWorks";let n,i,c,r,a,s,o;return e.init=function(){n=document.querySelector("body"),i=document.querySelector(".main"),c=document.querySelector(".menu"),r=document.querySelector(".home-button"),a=document.querySelector(".title"),s=a.querySelector(".title .red"),o=a.querySelector(".title .gray"),e.debug&&(e.currentMachine="david-compact",e.currentConcime="mesurol-pro",e.currentWorkingWidth=9,e.currentWorkingSpeed=6,e.currentWorkingQuantity=1),e.routes=[{regex:"^$",template:"index",callback:e.initIndex},{regex:"^set-machine/?$",template:"set-machine",callback:e.initSetMachine},{regex:"^machine/(?<id>[^/]*)/?$",template:"machine-detail",callback:e.initMachine,animate:!1},{regex:"^set-concime/?$",template:"set-concime",callback:e.initSetConcime},{regex:"^set-params/?$",template:"set-params",callback:e.initSetWorkingParameters},{regex:"^result/?$",template:"result",callback:e.initResult},{regex:"^saved-works/?$",template:"saved-works",callback:e.initSavedWorks},{regex:"^set-language/?$",template:"set-language",callback:e.initSetLanguage},{regex:"^set-unit/?$",template:"set-unit",callback:e.initSetUnit},{regex:"^calculate-params/?$",template:"calculate-params",callback:e.initCalculateParams},{regex:"^flow-factor/?$",template:"flow-factor",callback:e.initFlowFactor},{regex:"^conversions/?$",template:"conversions",callback:e.initConversions},{regex:"^concimi/?$",template:"concimi",callback:e.initConcimi}],window.addEventListener("hashchange",APP.onHashChange,!1),APP.onHashChange(),e.initMenu()},e.onHashChange=function(){e.hash=location.hash.substring(1);let t=!0,n=200;for(const r of e.routes){let a=new RegExp(r.regex,"i"),s=e.hash.match(a);if(s){let a=s.groups,o=document.querySelector(`template[data-section=${r.template}]`);if(o){e.currentTemplate&&(e.previousTemplate=e.currentTemplate),e.currentTemplate=r.template,e.currentTemplate;let s=o.content.cloneNode(!0);function c(){function e(){document.body.classList.add("animate")}let c=null;c="function"==typeof r.callback?r.callback(s,a):s,c&&(i.innerHTML="",i.append(c)),t?window.setTimeout(function(){e()},n):e()}t&&(document.body.classList.remove("animate"),e.previousTemplate?setTimeout(function(){c()},n):c())}break}}e.hash?r.classList.add("is-visible"):r.classList.remove("is-visible"),window.scrollTo({top:0,behavior:"smooth"})},e.changeContent=function(e){location.hash=e},e.back=function(e){history.back()},e.initIndex=function(t){return i.innerHTML=LANG.replace(t),e.setTitle(),null},e.setTitle=function(e=null,t=null){s&&(s.innerHTML=e||""),o&&(o.innerHTML=t||""),e||t?a.classList.remove("is-hidden"):a.classList.add("is-hidden")},e.initMenu=function(){let e=c.querySelector(".menu-saved"),t=c.querySelector(".menu-lang"),n=c.querySelector(".menu-unit"),i=c.querySelector(".menu-who"),r=c.querySelector(".menu-contact");e.innerHTML=LANG.get("menu-saved"),t.innerHTML=LANG.get("menu-lang"),n.innerHTML=LANG.get("menu-unit"),i.innerHTML=LANG.get("menu-who"),r.innerHTML=LANG.get("menu-contact")},e.menuOpen=function(){c.classList.add("is-visible"),n.classList.add("is-overflow")},e.menuClose=function(){c.classList.remove("is-visible"),n.classList.remove("is-overflow")},e.getStepHtml=function(t){let n=document.createElement("div");n.classList.add("step-list");let i=`<div class="step-list">\n            <button class="step" data-step="machine" onclick="APP.changeContent('set-machine');">\n                <div class="step-number">1</div>\n                <div class="step-title">${LANG.get("step-machine")}</div>\n                <div class="step-img">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel" viewBox="0 0 16 16"><path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2zm1 .5v1.308l4.372 4.858A.5.5 0 0 1 7 8.5v5.306l2-.666V8.5a.5.5 0 0 1 .128-.334L13.5 3.308V2h-11z"/></svg>\n                </div>\n                <div class="step-subtitle">${LANG.get("step-machine")}</div>\n            </button>\n            <button class="step" data-step="concime" onclick="APP.changeContent('set-concime');">\n                <div class="step-number">2</div>\n                <div class="step-title">${LANG.get("step-product")}</div>\n                <div class="step-img">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-flower2" viewBox="0 0 16 16"><path d="M8 16a4 4 0 0 0 4-4 4 4 0 0 0 0-8 4 4 0 0 0-8 0 4 4 0 1 0 0 8 4 4 0 0 0 4 4zm3-12c0 .073-.01.155-.03.247-.544.241-1.091.638-1.598 1.084A2.987 2.987 0 0 0 8 5c-.494 0-.96.12-1.372.331-.507-.446-1.054-.843-1.597-1.084A1.117 1.117 0 0 1 5 4a3 3 0 0 1 6 0zm-.812 6.052A2.99 2.99 0 0 0 11 8a2.99 2.99 0 0 0-.812-2.052c.215-.18.432-.346.647-.487C11.34 5.131 11.732 5 12 5a3 3 0 1 1 0 6c-.268 0-.66-.13-1.165-.461a6.833 6.833 0 0 1-.647-.487zm-3.56.617a3.001 3.001 0 0 0 2.744 0c.507.446 1.054.842 1.598 1.084.02.091.03.174.03.247a3 3 0 1 1-6 0c0-.073.01-.155.03-.247.544-.242 1.091-.638 1.598-1.084zm-.816-4.721A2.99 2.99 0 0 0 5 8c0 .794.308 1.516.812 2.052a6.83 6.83 0 0 1-.647.487C4.66 10.869 4.268 11 4 11a3 3 0 0 1 0-6c.268 0 .66.13 1.165.461.215.141.432.306.647.487zM8 9a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/></svg>\n                </div>\n                <div class="step-subtitle">${LANG.get("step-product")}</div>\n            </button>\n            <button class="step" data-step="params" onclick="APP.changeContent('set-params');">\n                <div class="step-number">3</div>\n                <div class="step-title">${LANG.get("step-params")}</div>\n                <div class="step-img">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sliders" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z"/></svg>\n                </div>\n                <div class="step-subtitle">${LANG.get("step-params")}</div>\n            </button>\n            <button class="step" data-step="result" onclick="APP.changeContent('result');">\n                <div class="step-number">4</div>\n                <div class="step-title">${LANG.get("step-result")}</div>\n                <div class="step-img">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-check" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3.854 2.146a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 3.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 1 1 .708-.708L2 7.293l1.146-1.147a.5.5 0 0 1 .708 0zm0 4a.5.5 0 0 1 0 .708l-1.5 1.5a.5.5 0 0 1-.708 0l-.5-.5a.5.5 0 0 1 .708-.708l.146.147 1.146-1.147a.5.5 0 0 1 .708 0z"/></svg>\n                </div>\n                <div class="step-subtitle">${LANG.get("step-result")}</div>\n            </button>\n        </div>`;n.innerHTML=i;let c=n.querySelector(`[data-step=${t}]`);c.classList.add("is-selected");let r=!e.currentConcime||!e.currentMachine,a=n.querySelector("[data-step=params]"),s=n.querySelector("[data-step=result]");if(r?(a.classList.add("is-disabled"),s.classList.add("is-disabled")):(a.classList.remove("is-disabled"),s.classList.remove("is-disabled")),e.currentMachine){let t=n.querySelector("[data-step=machine]");t.classList.add("is-set");let i=n.querySelector("[data-step=machine] .step-subtitle");i.innerHTML=e.getMachine(e.currentMachine).name}if(e.currentConcime){let t=n.querySelector("[data-step=concime]");t.classList.add("is-set");let i=n.querySelector("[data-step=concime] .step-subtitle");i.innerHTML=e.getConcime(e.currentConcime).name}if(e.currentWorkingWidth&&e.currentWorkingSpeed&&e.currentWorkingQuantity){let e=n.querySelector("[data-step=params]");e.classList.add("is-set")}return n.innerHTML},e.initSetMachine=function(t){let n=t.querySelector(".machine-list"),c=e.getMachine(),r="";for(const e of Object.keys(c)){let t=c[e];r+=`<button class="machine" onclick="APP.setMachine('${e}');">\n                <div class="machine-img">\n                    <img src="img/machine/${e}.jpg" alt="${t.name}" />\n                </div>\n                <div class="machine-footer">\n\n                    <div class="machine-info" onclick="event.stopPropagation();APP.showMachine('${e}');">\n                        <img src="img/icons/info-white.svg" />\n                    </div>\n                        <div class="machine-title">\n                            <div>\n                            ${t.name}\n                            <small>${t.subtitle}</small>\n                            </div>\n                        <img src="img/icons/chevron-right-white.svg" />\n                    </div>\n                </div>\n            </button>`}return e.setTitle(LANG.get("opening-calculate"),LANG.get("step-machine")),n.innerHTML=r,i.innerHTML=e.getStepHtml("machine"),i.append(t),null},e.getMachine=function(e){return e?MACHINE_DATA[e]:MACHINE_DATA},e.setMachine=function(t){t&&(e.currentMachine=t,e.refreshStepList(),e.currentConcime?e.changeContent("set-params"):e.changeContent("set-concime"))},e.initMachine=function(t,n){let c=e.getMachine(n.id),r="machine-desc",a=`<div class="machine-detail">\n            <button class="machine-close" onclick="APP.hideMachine();">\n                <img src="img/icons/close.svg" alt="">\n            </button>\n            <div class="machine-img">\n                <img src="img/machine/${n.id}.jpg" alt="${c.name}" />\n            </div>\n            <div class="machine-title">\n                ${c.name}\n            </div>\n            <div class="machine-subtitle">\n                ${c.subtitle}\n                </div>\n            <div class="machine-desc">${r}</div>\n        </div>`,s=document.createElement("div");return s.classList.add("machine-detail-container","is-visible"),s.innerHTML=a,i.append(s),null},e.showMachine=function(t){let n=e.getMachine(t),c=LANG.get(t),r=`<div class="machine-detail">\n            <div class="machine-title">\n                ${n.name}\n                <small>${n.subtitle}</small>\n\n                <button class="machine-close" onclick="APP.hideMachine();">\n                    <img src="img/icons/close-white.svg" alt="">\n                </button>\n            </div>\n            <div class="machine-scroll">\n                <div class="machine-img">\n                    <img src="img/machine/${t}.jpg" alt="${n.name}" />\n                    <div class="machine-subtitle">\n                        ${c.subtitle}\n                    </div>\n                </div>\n\n                <div class="machine-desc">\n                    <b>${c.shortDescription}</b>\n                    ${c.description}\n                </div>\n            </div>\n        </div>`,a=document.createElement("div");return a.classList.add("machine-detail-container"),a.innerHTML=r,i.append(a),setTimeout(()=>{document.querySelector(".machine-detail-container").classList.add("is-visible")},300),null},e.hideMachine=function(){e.previousTemplate;let t=document.querySelector(".machine-detail-container");t&&(t.classList.remove("is-visible"),setTimeout(()=>{t.remove()},300))},e.initSetConcime=function(t){let n=t.querySelector(".concime-type-list"),c=t.querySelector(".concime-list"),r=e.getConcime(),a='<div class="concime-type-title">Filter by:</div>';for(const t of e.concimeTypeList){let e=UTIL.capitalizeFirstLetter(t);a+=`<button class="concime-type" onclick="APP.setConcimeType(this, '${t}');">\n                <div class="concime-type-img">\n                    <img src="img/concime-type/${t}.jpg" alt="${e}" />\n                </div>\n                ${e}\n            </button>`}n.innerHTML=a,a="";for(const e of Object.keys(r)){let t=r[e];a+=`<button class="concime" data-concime-type="${t.type}" onclick="APP.setConcime('${e}');">\n                <div class="concime-img">\n                    <img src="img/concime/${e}.png" alt="${t.name}" />\n                </div>\n                <div class="concime-footer">\n                    <div class="concime-info" onclick="event.stopPropagation();APP.showConcime('${e}');">\n                        <img src="img/icons/info-white.svg" />\n                    </div>\n                    <div class="concime-title">\n                        <div>${t.name}</div>\n                        <img src="img/icons/chevron-right-white.svg" />\n                    </div>\n                </div>\n            </button>`}return c.innerHTML=a,i.innerHTML=e.getStepHtml("concime"),i.append(t),e.setTitle(LANG.get("opening-calculate"),LANG.get("step-product")),null},e.getConcime=function(e){return e?CONCIME_DATA[e]:CONCIME_DATA},e.setConcimeType=function(e,t){let n=document.querySelector(".concime-type.is-selected");if(n&&n.classList.remove("is-selected"),e.classList.add("is-selected"),!t)return;let i=document.querySelectorAll(".concime");for(const e of i)e.getAttribute("data-concime-type")===t?e.removeAttribute("hidden"):e.setAttribute("hidden","")},e.setConcime=function(t){t&&(e.currentConcime=t,e.refreshStepList(),e.changeContent("set-params"),e.currentMachine?e.changeContent("set-params"):e.changeContent("set-machine"))},e.refreshStepList=function(){if(e.currentConcime&&e.currentMachine){let e=document.querySelector(".step[data-step=params]");e.classList.remove("is-disabled")}},e.showConcime=function(t){let n=e.getConcime(t),c=(LANG.get(t),[{category:"Information"},{name:"Family",value:n.category||""},{name:"Country",value:n.country||""},{name:"Form",value:n.producer||""},{name:"Manufacturer",value:n.producer||""},{name:"KG/DM3",value:n.weight||""},{category:"Fractionation"},{name:"",value:""},{name:"",value:""},{category:"Chemical composition"},{name:"",value:n.chemicalComposition_it||""}]),r="";for(const e of c)e.category?r+=`<div class="property-category">${e.category}</div>`:e.value&&(r+=`<div class="property">\n                    <div class="property-name">${e.name}</div>\n                    <div class="property-line"></div>\n                    <div class="property-value">${e.value}</div>\n                </div>`);let a=`<div class="concime-detail">\n            <div class="concime-title">\n                <small>${n.type}</small>\n\n                <button class="concime-close" onclick="APP.hideConcime();">\n                    <img src="img/icons/close-white.svg" alt="">\n                </button>\n            </div>\n            <div class="concime-scroll">\n                <div class="concime-img">\n                    <img src="img/concime/${t}.png" alt="${n.name}" />\n                    <div class="concime-subtitle">\n                        ${n.name}\n                    </div>\n                </div>\n\n                <div class="property-list">\n                    ${r}\n                </div>\n            </div>\n        </div>`,s=document.createElement("div");return s.classList.add("concime-detail-container"),s.innerHTML=a,i.append(s),setTimeout(()=>{document.querySelector(".concime-detail-container").classList.add("is-visible")},300),null},e.hideConcime=function(){e.previousTemplate;let t=document.querySelector(".concime-detail-container");t&&(t.classList.remove("is-visible"),setTimeout(()=>{t.remove()},300))},e.initSetWorkingParameters=function(t){e.currentMachine||e.changeContent("set-machine"),e.currentConcime||e.changeContent("set-concime");let n=e.getMachine(e.currentMachine),c="";n.widthOpt&&(c=`<div class="optional-width">\n                <input class="optional-width-checkbox switch" id="optionalWidth" name="optionalWidth" type="checkbox" onchange="APP.refreshMaxWorkingWidth();">\n                <label class="optional-width-label" for="optionalWidth">${LANG.get("machine-kit")}</label>\n            </div>`);let r={width:{min:UNIT.convert(n.widthMin,UNIT.WIDTH),max:UNIT.convert(e.getMaxWidth(e.currentMachine,e.currentConcime),UNIT.WIDTH),unit:UNIT.current().width,current:UNIT.convert(e.currentWorkingWidth,UNIT.WIDTH)},speed:{min:UNIT.convert(6,UNIT.SPEED),max:UNIT.convert(20,UNIT.SPEED),unit:UNIT.current().speed,current:UNIT.convert(e.currentWorkingSpeed,UNIT.SPEED)},quantity:{min:UNIT.convert(3,UNIT.QUANTITY),max:UNIT.convert(1e3,UNIT.QUANTITY),unit:UNIT.current().quantity,current:UNIT.convert(e.currentWorkingQuantity,UNIT.QUANTITY)}},a=t.querySelector(".parameter-list"),s="";for(const e of Object.keys(r)){let t=r[e],n=t.current||t.min;s+=`<div class="parameter parameter-${e}" data-id="${e}">\n                <div class="parameter-title">${UTIL.capitalizeFirstLetter(e)}</div>\n                ${"width"===e?c:""}\n                <div class="parameter-input">\n                    <div class="parameter-text">\n                        <input id="widthText" type="text" value="${n}" onchange="APP.refreshCurrentParams(this);">\n                    </div>\n                    <div class="parameter-slider">\n                        <div class="parameter-max">${t.max} ${t.unit}</div>\n                        <div class="parameter-min">${t.min} ${t.unit}</div>\n                        <input id="widthRange" type="range" step="1" max="${t.max}" min="${t.min}" value="${n}" oninput="APP.refreshCheckLabel(this);">\n                    </div>\n                </div>\n\n\n            </div>`}return a.innerHTML=s,i.innerHTML=e.getStepHtml("params"),t.innerHTML=s,i.append(t),e.currentWorkingWidth=UNIT.unconvert(document.querySelector(".parameter-width .parameter-slider input").value,UNIT.WIDTH),e.currentWorkingSpeed=UNIT.unconvert(document.querySelector(".parameter-speed .parameter-slider input").value,UNIT.SPEED),e.currentWorkingQuantity=UNIT.unconvert(document.querySelector(".parameter-quantity .parameter-slider input").value,UNIT.QUANTITY),e.setTitle(LANG.get("opening-calculate"),LANG.get("step-params")),null},e.refreshCheckLabel=function(t){let n=t.closest(".parameter"),i=n.querySelector(".parameter-text input"),c=n.getAttribute("data-id");e["currentWorking"+UTIL.capitalizeFirstLetter(c)]=UNIT.unconvert(t.value,c),i.value=t.value},e.refreshMaxWorkingWidth=function(){e.getMachine(e.currentMachine);let t=document.querySelector(".optional-width-checkbox"),n=document.querySelector(".parameter-width .parameter-max"),i=document.querySelector(".parameter-width .parameter-slider input"),c=e.getMaxWidth(e.currentMachine,e.currentConcime,t.checked);c=UNIT.convert(c,UNIT.WIDTH),n.innerHTML=c+" "+UNIT.current().width,i.setAttribute("max",c),e.refreshCheckLabel(i)},e.paramsReset=function(){},e.refreshCurrentParams=function(t){let n=t.closest(".parameter"),i=n.getAttribute("data-id");e["currentWorking"+UTIL.capitalizeFirstLetter(i)]=UNIT.unconvert(t.value,i)},e.paramsCompute=function(){e.changeContent("result")},e.getMaxWidth=function(t,n,i=!1){let c=e.getMachine(t),r=e.getConcime(n),a=Math.min(c.widthMax,r.spreadingLimit),s=i?c.widthOptException:c.widthException;return s&&n in s&&(a=Math.min(a,s[n])),a},e.getOpening=function(t,n){const i=0,c=1;e.getMachine(t),e.getConcime(n);let r=e.currentWorkingQuantity*e.currentWorkingWidth*e.currentWorkingSpeed/600;r=UTIL.round(r);let a=null,s=CURVE_DATA[n],o=Number.MAX_VALUE,l=null;for(let e=0;e<s.length&&(l=Math.abs(s[e][c]-r),l<o);e++)o=l,a=s[e][i];return{opening:a,kgMin:r}},e.initResult=function(t){function n(e,t,n=!1,i=!1){let c="";return c+=n?`<div class="property-category">${e}</div>`:`<div class="property ${i?"is-important":""}">\n                    <div class="property-name">${e}</div>\n                    <div class="property-line"></div>\n                    <div class="property-value">${t}</div>\n                </div>`,c}e.currentMachine||e.changeContent("set-machine"),e.currentConcime||e.changeContent("set-concime");let c=e.getMachine(e.currentMachine),r=e.getConcime(e.currentConcime),a=t.querySelector(".result-list"),s="",o=e.getOpening(e.currentMachine,e.currentConcime);return s+=n(LANG.get("step-result"),c.name,!0),s+=n(LANG.get("opening"),o.opening,!1,!0),s+=n("Mass flow",UNIT.convert(o.kgMin,UNIT.MASS_FLOW,!0)),s+=n("Spreader",c.name,!0),s+=n("Spreader",c.name),s+=n("Discs height",""),s+=n("Pto speed",""),s+=n("Concime",c.name,!0),s+=n("Family",r.type),s+=n("Product",r.name),s+=n("Form",r.shape),s+=n("Weight",r.weight),s+=n("Working parameters",c.name,!0),s+=n("Working width",UNIT.convert(e.currentWorkingWidth,UNIT.WIDTH,!0)),s+=n("Speed",UNIT.convert(e.currentWorkingSpeed,UNIT.SPEED,!0)),s+=n("Quantity",UNIT.convert(e.currentWorkingQuantity,UNIT.QUANTITY,!0)),a.innerHTML='<div class="property-list">'+s+"</div>",i.innerHTML=e.getStepHtml("result"),i.append(t),e.setTitle(LANG.get("opening-calculate"),LANG.get("step-result")),null},e.saveResult=function(){let n={currentMachine:e.currentMachine,currentConcime:e.currentConcime,currentWorkingWidth:e.currentWorkingWidth,currentWorkingSpeed:e.currentWorkingSpeed,currentWorkingQuantity:e.currentWorkingQuantity,date:(new Date).toISOString(),id:UTIL.guid()},i=e.getSavedWorks();i.unshift(n),localStorage.setItem(t,JSON.stringify(i)),e.changeContent("saved-works")},e.getSavedWorks=function(){let e=JSON.parse(localStorage.getItem(t));return Array.isArray(e)||(e=[]),e},e.initSavedWorks=function(){let t="",n=document.createElement("div");n.classList.add("saved-work-list");let i=e.getSavedWorks();for(const n of i){let i=encodeURIComponent(JSON.stringify(n)),c=UTIL.formatDate(n.date),r=e.getMachine(n.currentMachine),a=e.getConcime(n.currentConcime);t+=`\n                <div class="saved-work" onclick="APP.loadSavedWork('${i}');">\n                    <div class="saved-work-text">\n                        <div class="saved-work-title">\n                            ${c} / ${r.name} / ${a.name}\n                        </div>\n                        <div class="saved-work-subtitle">\n                            <em>${LANG.get("params-width")}</em>${n.currentWorkingWidth}\n                            <em>${LANG.get("params-speed")}</em>${n.currentWorkingSpeed}\n                            <em>${LANG.get("params-quantity")}</em>${n.currentWorkingQuantity}\n                        </div>\n                    </div>\n                    <div class="saved-work-cta">\n                        <div class="saved-work-delete" onclick="event.stopPropagation();APP.deleteSavedWork('${n.id||0}');">\n                            <img src="img/icons/close-white.svg" />\n                        </div>\n                    </div>\n                </div>`}return n.innerHTML=t,e.setTitle(LANG.get("saved-works"),""),n},e.loadSavedWork=function(t){t=JSON.parse(decodeURIComponent(t)),e.currentMachine=t.currentMachine,e.currentConcime=t.currentConcime,e.currentWorkingWidth=t.currentWorkingWidth,e.currentWorkingSpeed=t.currentWorkingSpeed,e.currentWorkingQuantity=t.currentWorkingQuantity,e.changeContent("result")},e.deleteSavedWork=function(n){let i=e.getSavedWorks(),c=0;for(const e of i){if(e.id==n){i.splice(c,1);break}c++}localStorage.setItem(t,JSON.stringify(i)),location.reload()},e.initCalculateParams=function(t){return i.innerHTML=LANG.replace(t),e.setTitle(),null},e.calculateParamsCompute=function(){let e=document.querySelector("#flowSpecificWeight").value,t=document.querySelector("#flowQuantityStart").value,n=document.querySelector("#flowQuantityEnd").value,i=document.querySelector("#flowLiterStart").value,c=document.querySelector("#flowLiterEnd").value,r=(t-n)/(i-c)*e;r=Math.max(r,0),r=UTIL.round(r),isNaN(r)&&(r=0);let a=document.querySelector(".result-number");a.innerHTML=r},e.getFlowStepHtml=function(t){let n="",i="is-selected",c=!e.currentConcime||!e.currentMachine;return n=`<div class="step-list">\n            <button class="step ${"machine"===t?i:""}" data-step="machine" onclick="APP.changeContent('set-machine');">\n                <div class="step-number">1</div>\n                <div class="step-title">${LANG.get("step-machine")}</div>\n                <div class="step-subtitle">Set your spreader</div>\n            </button>\n            <button class="step ${c?"is-disabled":""} ${"params"===t?i:""}" data-step="params" onclick="APP.changeContent('set-params');">\n                <div class="step-number">2</div>\n                <div class="step-title">${LANG.get("step-params")}</div>\n                <div class="step-subtitle">Set parameters</div>\n            </button>\n            <button class="step ${c?"is-disabled":""} ${"result"===t?i:""}" data-step="result" onclick="APP.changeContent('result');">\n                <div class="step-number">3</div>\n                <div class="step-title">RESULT</div>\n                <div class="step-subtitle"> </div>\n            </button>\n        </div>`,n},e.initFlowFactor=function(t){return i.innerHTML=LANG.replace(t),i.append(t),e.setTitle(LANG.get("flow-factor")),null},e.initConversions=function(t){return e.setTitle(LANG.get("conversions")),i.innerHTML=LANG.replace(t),i.append(t),e.refreshConversions(),null},e.conversionsCalculate=function(){let e=document.querySelector(".system-list-from .system-option.is-selected").getAttribute("data-system"),t=document.querySelector(".system-list-to .system-option.is-selected").getAttribute("data-system"),n=document.querySelectorAll(".conversion-list .conversion");for(const i of n){let n=i.getAttribute("data-unit"),c=i.querySelector(".conversion-from input").value,r=(i.querySelector(".conversion-from .conversion-unit"),i.querySelector(".conversion-to .conversion-unit"),i.querySelector(".conversion-to input"));r.value=UNIT.fullConvert(c,n,e,t)}},e.refreshConversions=function(){let e=document.querySelector(".system-list-from .system-option.is-selected").getAttribute("data-system"),t=document.querySelector(".system-list-to .system-option.is-selected").getAttribute("data-system"),n=document.querySelectorAll(".conversion-list .conversion");for(const i of n){let n=i.getAttribute("data-unit"),c=(i.querySelector(".conversion-from input").value,i.querySelector(".conversion-from .conversion-unit")),r=i.querySelector(".conversion-to .conversion-unit");i.querySelector(".conversion-to input");c.innerHTML=UNIT.get(e)[n],r.innerHTML=UNIT.get(t)[n]}},e.selectConvertUnit=function(t){let n=t.closest(".system-list").querySelector(".is-selected");n.classList.remove("is-selected"),t.classList.add("is-selected"),e.refreshConversions()},e.initConcimi=function(t){t.querySelector(".concime-type-list"),t.querySelector(".concime-list");let n=e.getConcime(),c='<div class="concime-type-list"><div class="concime-type-title">Filter by:</div>';for(const t of e.concimeTypeList){let e=UTIL.capitalizeFirstLetter(t);c+=`<button class="concime-type" onclick="APP.setConcimeType(this, '${t}');">\n                <div class="concime-type-img">\n                    <img src="img/concime-type/${t}.jpg" alt="${e}" />\n                </div>\n                ${e}\n            </button>`}c+="</div>",c+='<div class="concime-list">';for(const e of Object.keys(n)){let t=n[e]
;c+=`<button class="concime" data-concime-type="${t.type}" onclick="APP.showConcime('${e}');">\n                <div class="concime-img">\n                    <img src="img/concime/${e}.png" alt="${t.name}" />\n                </div>\n                <div class="concime-footer">\n                    <div class="concime-info" onclick="event.stopPropagation();APP.showConcime('${e}');">\n                        <img src="img/icons/info-white.svg" />\n                    </div>\n                    <div class="concime-title">\n                        <div>${t.name}</div>\n                        <img src="img/icons/chevron-right-white.svg" />\n                    </div>\n                </div>\n            </button>`}return c+="</div>",i.innerHTML=c,e.setTitle(LANG.get("products")),null},e.initSetLanguage=function(){let t="",n=document.createElement("div");for(const e of LANG.list()){let n=e.id==LANG.current()?"is-current":"";t+=`\n                    <div class="lang ${n}" onclick="LANG.change('${e.id}');APP.changeContent('')">\n                        <div class="lang-flag"><img src="img/lang/flag-${e.id}.png" /></div>\n                        <div class="lang-title">${e.name}</div>\n                    </div>`}return t=`<div class="lang-list">${t}</div>`,n.innerHTML=t,e.setTitle(LANG.get("menu-lang")),n},e.initSetUnit=function(){let t="",n=document.createElement("div");n.classList.add("unit-list");for(const e of UNIT.list()){let n=e.id==UNIT.current().id?"is-current":"";t+=`\n                    <div class="unit ${n}" onclick="UNIT.change('${e.id}');APP.back()">\n                        <div class="unit-title">${LANG.get("unit-system-"+e.id)}</div>\n                    </div>`}return n.innerHTML=t,e.setTitle(LANG.get("menu-unit")),n},e}();document.addEventListener("DOMContentLoaded",function(){LANG.init()});